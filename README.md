# Booking SaaS ‚Äî Complete MVP (Next.js + Supabase + LINE OA)

‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å
- ‡∏´‡∏ô‡πâ‡∏≤ **/book** (‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤) ‚Äî ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡πå‡∏î (‡∏°‡∏µ‡∏£‡∏π‡∏õ), ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•, ‡∏Å‡∏±‡∏ô‡∏Ñ‡∏¥‡∏ß‡∏ä‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤
- **API**: `/api/bookings/create` (‡∏Å‡∏±‡∏ô‡∏ä‡∏ô), `/api/services/list`
- **LINE Webhook** `/api/line/webhook` ‚Äî ‡∏ï‡∏≠‡∏ö "‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß", ‡∏£‡∏±‡∏ö‡∏£‡∏π‡∏õ‡∏™‡∏•‡∏¥‡∏õ, ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î Storage, ‡πÅ‡∏ô‡∏ö‡∏Å‡∏±‡∏ö booking ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **Admin** `/admin/bookings` ‚Äî ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô + ‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥/‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ + ‡∏•‡∏¥‡∏á‡∏Å‡πå **‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏°‡∏±‡∏î‡∏à‡∏≥** ‡πÅ‡∏ö‡∏ö‡∏û‡∏¥‡∏°‡∏û‡πå‡πÑ‡∏î‡πâ
- **‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô (CSV)** `/api/admin/reports/daily?date=YYYY-MM-DD&format=csv`
- **Storage**: ‡∏ö‡∏±‡∏Ñ‡πÄ‡∏Å‡πá‡∏ï `payment-slips`
- **Edge Function**: `send-reminders` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ô‡∏±‡∏î‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ (09:00 Asia/Bangkok)

## ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á
1) ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå Supabase ‚Üí ‡πÄ‡∏õ‡∏¥‡∏î SQL Editor ‚Üí ‡∏£‡∏±‡∏ô `db/schema.sql`
   ```sql
   select storage.create_bucket('payment-slips', public => false);
   ```
2) ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å `.env.example` ‡πÄ‡∏õ‡πá‡∏ô `.env.local` ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö

3) ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ô
```bash
npm i
npm run dev
```

4) ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ LINE OA (Messaging API)
- ‡πÉ‡∏ä‡πâ webhook URL: `https://<‡πÇ‡∏î‡πÄ‡∏°‡∏ô‡∏´‡∏£‡∏∑‡∏≠ ngrok>/api/line/webhook`
- ‡∏õ‡∏¥‡∏î Auto-reply & Greeting ‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß

5) ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô: `/admin/bookings?token=<ADMIN_TOKEN>`

## ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏
- ‡πÉ‡∏ä‡πâ **ADMIN_TOKEN** ‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö MVP; ‡πÇ‡∏õ‡∏£‡∏î‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏ß‡∏¢ NextAuth/Supabase Auth + RLS ‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡∏î‡∏±‡∏Å‡∏ä‡∏±‡∏ô
- ‡∏Å‡∏±‡∏ô‡∏Ñ‡∏¥‡∏ß‡∏ä‡∏ô: ‡∏ù‡∏±‡πà‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏µ unique index ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô start_at ‡∏ã‡πâ‡∏≥ ‡πÅ‡∏•‡∏∞‡∏ù‡∏±‡πà‡∏á API ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡∏≤‡∏° `duration_mins`

‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡πÇ‡∏°‡πÅ‡∏•‡∏∞‡∏Ç‡∏≤‡∏¢‡∏Ñ‡πà‡∏∞/‡∏Ñ‡∏£‡∏±‡∏ö üöÄ
